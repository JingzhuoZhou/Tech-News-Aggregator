{% extends "base.html" %}
{% load static %}

{% block title %}
    {{ article.title }}
{% endblock title %}

{% block content %}

<div class="container">
    <div class="row gap-1">
        <div class="col-2 border-end border-secondary">
            <!-- 悬浮导航 -->
            <div style="position: sticky;top: 250px;height: fit-content;">
                <ul class="nav nav-pills flex-column mb-auto">
              <li class="nav-item">
                <a href="{{ article.url }}" class="nav-link link-dark" aria-current="page" style="font-size: 18px;color: dimgrey;">
                  <svg class="bi me-2" width="0" height="40"></svg>
                  原网址
                </a>
              </li>
              <li>
                <a href="{% url 'article:category' article.category %}" class="nav-link link-dark" style="font-size: 18px;color: dimgrey;">
                  <svg class="bi me-2" width="0" height="40"></svg>
                  分类：{{ article.category }}
                </a>
              </li>
              
            </ul>
            </div>
        </div> 
        <div class="col-1"></div>
        <!-- 正文+评论 -->
        <div class="col-8">

            <h1 class="mt-4 mb-4">{{ article.title }}</h1>
            <div class="alert alert-light" style="width: 600px;background-color: #e3f2fd;">作者：{{ article.author }}</div>
            <!-- 引入文章主体 -->
            <div>
                {% include body %}
            </div>
            <hr>
            <!-- 评论部分 -->
            <div>
                <form 
                    action="{% url 'article:comment_post' article.id %}" 
                    method="POST"
                >
                    {% csrf_token %}
                    <div class="form-group mb-2">
                        <label for="body">
                            <strong>
                                评论：
                            </strong>
                        </label>
                        <textarea 
                            type="text" 
                            class="form-control" 
                            id="body" 
                            name="body" 
                            rows="2"></textarea>
                    </div>
                    <button type="submit" class="btn btn-sm" style="background-color: #e3f2fd;">发送</button>                    
                </form>
            </div>
            <br>
            <!-- 显示评论 -->
            <h4>共有{{ article.comment_num }}条评论</h4>
            <div>
                {% for comment in comments %}
                <hr>
                <p>
                    <span style="color:cornflowerblue">
                        {{ comment.post_time|date:"Y-m-d H:i:s" }}
                    </span> 
                </p>
                <pre style="font-family: inherit; font-size: 1em;">
{{ comment.body }}</pre>
                <a class="btn btn-outline-secondary btn-sm" href="{% url 'article:comment_del' comment.id %}">删除</a>
            {% endfor %}
            </div>
        </div>
    </div>
</div>

{% endblock content %}